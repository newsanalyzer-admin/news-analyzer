spring:
  # Default H2 datasource for tests that mock repositories or don't need PostgreSQL features
  # Tests requiring PostgreSQL features should use @Import(TestcontainersConfiguration.class)
  # which overrides this datasource via @ServiceConnection
  datasource:
    url: jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DEFAULT_NULL_ORDERING=HIGH
    driver-class-name: org.h2.Driver
    username: sa
    password:

  jpa:
    # Use PostgreSQL dialect for H2 PostgreSQL mode
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    hibernate:
      # Disable DDL auto-generation to avoid H2 compatibility errors with PostgreSQL-specific types
      # Schema will be created by Flyway or Testcontainers for integration tests
      ddl-auto: none
    show-sql: false
    properties:
      hibernate:
        format_sql: true
    open-in-view: false

  flyway:
    enabled: false

  data:
    redis:
      repositories:
        enabled: false

  security:
    user:
      name: user
      password: test

logging:
  level:
    org.newsanalyzer: DEBUG
    org.hibernate.SQL: WARN
    org.hibernate.type: WARN
    org.springframework.security: WARN
